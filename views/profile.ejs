<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Profile - Spice Kitchen</title>
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css"
    />
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "#FF642F",
              secondary: "#2ECC71",
              danger: "#E74C3C",
            },
            borderRadius: {
              none: "0px",
              sm: "4px",
              DEFAULT: "8px",
              md: "12px",
              lg: "16px",
              xl: "20px",
              "2xl": "24px",
              "3xl": "32px",
              full: "9999px",
              button: "8px",
            },
          },
        },
      };
    </script>
    <link rel="stylesheet" href="/stylesheets/profile.css">
    </head>


<body class="bg-gray-900 text-white min-h-screen">
    <div
      class="fixed top-0 left-0 right-0 h-14 header-blur border-b border-gray-800 z-50"
    >
      <div class="flex items-center justify-between h-full px-4">
        <button
          id="backButton"
          class="w-10 h-10 flex items-center justify-center"
        >
          <i class="ri-arrow-left-line text-xl text-white"></i>
        </button>
        <h1 class="text-lg font-semibold">Profile</h1>
        <div class="w-10"></div>
      </div>
    </div>

    <div class="pt-16 pb-8 px-4 min-h-screen">
      <div class="max-w-md mx-auto space-y-8">
        <div class="text-center space-y-4">
          <div class="profile-pic-container">
            <img
              id="profilePic"
              src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120' viewBox='0 0 120 120'%3E%3Ccircle cx='60' cy='60' r='60' fill='%23333'/%3E%3Ccircle cx='60' cy='45' r='20' fill='%23666'/%3E%3Cpath d='M20 100c0-22 18-40 40-40s40 18 40 40' fill='%23666'/%3E%3C/svg%3E"
              alt="Profile Picture"
              class="profile-pic"
            />
            <div
              class="upload-overlay"
              id="uploadButton"
              aria-label="Upload profile picture"
            >
              <i class="ri-camera-line text-white text-lg"></i>
            </div>
          </div>
          <input type="file" id="fileInput" accept="image/*" class="hidden" />
        </div>

        <form id="profileForm" class="space-y-6">
          <div class="input-container">
            <input
            type="text"
            id="nameField"
            class="input-field h-14 px-4 rounded-lg"
            placeholder=" "
            value="<%= username %>"
            autocapitalize="words"
            maxlength="50"
            autocomplete="name"
          />
            <label for="nameField" class="floating-label">Username</label>
            <div class="error-message" id="nameError"></div>
          </div>

          <div class="input-container">
            <input
              type="tel"
              id="phoneField"
              class="input-field h-14 px-4 rounded-lg"
              placeholder=" "
              value="<%= phone %>"
              maxlength="12"
              autocomplete="tel"
            />
            <label for="phoneField" class="floating-label">Phone Number</label>
            <div class="error-message" id="phoneError"></div>
          </div>

          <div class="space-y-4 pt-4">
            <button
              type="submit"
              id="saveButton"
              class="save-button w-full h-12 rounded-button text-white font-semibold"
              disabled
            >
              <span id="saveText">Save Profile</span>
              <div
                id="loadingSpinner"
                class="loading-spinner hidden mx-auto"
              ></div>
            </button>

            <button
              type="button"
              id="clearButton"
              class="clear-button w-full h-12 rounded-button font-semibold"
            >
              Clear Profile
            </button>

            <br> <br>
            

            <a href="/profile/logout">
              <button
                type="button"
                id="logoutButton"
                class="logout-button w-full h-12 rounded-button font-semibold"
              >
                Logout
              </button>
            </a>
          </div>
        </form>
      </div>
    </div>

    <div id="toast" class="toast">
      <div class="flex items-center justify-between gap-2">
        <div class="flex items-center gap-2">
          <i class="ri-check-line"></i>
          <span id="toastMessage">Profile saved successfully!</span>
        </div>
        <button
          id="closeToast"
          class="w-6 h-6 flex items-center justify-center"
        >
          <i class="ri-close-line"></i>
        </button>
      </div>
      <div class="progress-bar"></div>
    </div>

    <div id="confirmModal" class="modal">
      <div class="modal-content">
        <h3 class="text-lg font-semibold mb-4 text-center">Clear Profile</h3>
        <p class="text-gray-300 mb-6 text-center">
          Are you sure you want to clear all profile data? This action cannot be
          undone.
        </p>
        <div class="flex gap-3">
          <button
            id="cancelClear"
            class="flex-1 h-12 bg-gray-600 text-white rounded-button"
          >
            Cancel
          </button>
          <button
            id="confirmClear"
            class="flex-1 h-12 bg-danger text-white rounded-button"
          >
            Clear All
          </button>
        </div>
      </div>
    </div>
    <script src="/javascripts/profile.js"></script>
    </body>
